#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

class Main
{
    private $codebreaker;
    private $printer;

    public function __construct(Codebreaker $codebreaker, CodeBreakerPrinter $printer)
    {
        $this->codebreaker = $codebreaker;
        $this->codebreaker->setSecret((string)rand(1000, 9999));

        $this->printer = $printer;
    }

    public function run()
    {
        $guessResult = $this->takeGuess();

        if ($guessResult !== '++++') {
            $this->printer->printResult($guessResult);
            return $this->run();
        }

        $this->printer->printResult($guessResult);
        echo("Well done!!!\n");
    }

    private function takeGuess()
    {
        $guess = readline('Guess what 4 digit number I\'m thing of? ');
        $guessResult = $this->codebreaker->takeGuess($guess);
        return $guessResult;
    }

}


$codeBreaker = new <your code breaker here>;
$printer = new <your printer class here>;

$codebreaker = new Main($codeBreaker, $printer);
$codebreaker->run();
